{"version":3,"sources":["scripts/01_main.js","scripts/_search-gif.js"],"names":["giphy_api","endpoint","key","search_button","document","querySelector","visible_response","style","display","unvisible_response","add_response_title","response_title","request_text","value","innerHTML","add_image_src","result","img","alt","split","src","data","id","add_error","text_error","createElement","className","undefined","BAD_code","open_popup","after","delete_error","remove","send_request_giphy","get_answer_giphy","show_search_result","images","querySelectorAll","length","tytle","text","classList","add","addEventListener","event","preventDefault","close_popup","async","get_result","fetch","json","error","console","log"],"mappings":"AAAA;ACAA,MAAMA,UAAY,CACdC,SAAU,wCACVC,IAAK,oCAEHC,cAAgBC,SAASC,cAAc,cAEvCC,iBAAmB,KACrBF,SAASC,cAAc,aAAaE,MAAMC,QAAU,SAGlDC,mBAAqB,KACvBL,SAASC,cAAc,aAAaE,MAAMC,QAAU,QAGlDE,mBAAqB,KACvB,IAAIC,EAAiBP,SAASC,cAAc,oBAC5CO,EAAeR,SAASC,cAAc,gBAAgBQ,MAEtDF,EAAeG,UAAY,qBAAqBF,KAG9CG,cAAgB,CAACC,EAAQC,KACC,GAAzBA,EAAIC,IAAIC,MAAM,KAAK,GAClBF,EAAIG,IAAM,kCAAkCJ,EAAOK,KAAK,GAAGC,eAC3B,GAAzBL,EAAIC,IAAIC,MAAM,KAAK,GAC1BF,EAAIG,IAAM,kCAAkCJ,EAAOK,KAAK,GAAGC,eAC3B,GAAzBL,EAAIC,IAAIC,MAAM,KAAK,KAC1BF,EAAIG,IAAM,kCAAkCJ,EAAOK,KAAK,GAAGC,iBAI7DC,UAAY,KACd,IAAIC,EAAapB,SAASqB,cAAc,OACxCD,EAAWE,UAAY,cACvB,IACuB,IAAhBd,cAAsC,MAAhBA,cAAwCe,MAAhBf,cAA2BgB,WAC9E,MACEC,WAAW,oBAAqB,kBAEU,OAA3CzB,SAASC,cAAc,kBACtBD,SAASC,cAAc,gBAAgByB,MAAMN,GAC7CpB,SAASC,cAAc,gBAAgBS,UAAY,iDAIrDiB,aAAe,KAC4B,MAA1C3B,SAASC,cAAc,iBACtBD,SAASC,cAAc,gBAAgB2B,UAIzCC,mBAAqB,KACvBC,oBAGEC,mBAAsBnB,IAExBN,qBAlDAN,SAASC,cAAc,aAAaE,MAAMC,QAAU,QAqDpD,IAAI4B,EAAShC,SAASiC,iBAAiB,2BAEvC,IAAI,IAAIpB,KAAOmB,EAhB8B,MAA1ChC,SAASC,cAAc,iBACtBD,SAASC,cAAc,gBAAgB2B,SAmBd,GAAtBhB,EAAOK,KAAKiB,OACXvB,cAAcC,EAAQC,IAEtBM,YA1DRnB,SAASC,cAAc,aAAaE,MAAMC,QAAU,SAiElDqB,WAAa,CAACU,EAAOC,KAEvBpC,SAASC,cAAc,gBAAgBS,UAAYyB,EACnDnC,SAASC,cAAc,eAAeS,UAAY0B,EAElDpC,SAASC,cAAc,gBAAgBoC,UAAUC,IAAI,UACrDtC,SAASC,cAAc,UAAUoC,UAAUC,IAAI,UAE/CtC,SAASC,cAAc,iBAAiBsC,iBAAiB,SAAUC,IAC/DA,EAAMC,iBACNC,kBAIFA,YAAc,KAEhB1C,SAASC,cAAc,gBAAgBoC,UAAUT,OAAO,UACxD5B,SAASC,cAAc,UAAUoC,UAAUT,OAAO,WAItDe,eAAeb,mBAEX,IAAItB,EAAeR,SAASC,cAAc,gBAAgBQ,MAE1D,IACI,IAAImC,QAAmBC,MACnB,GAAGjD,UAAUC,mBAAmBD,UAAUE,SAASU,8BAEnDI,QAAegC,EAAWE,OAC9Bf,mBAAmBnB,GACrB,MAAOmC,GACLtB,WAAW,wBAAyB,2BACpCuB,QAAQC,IAAI,qDAAqDF,MAKzEhD,cAAcwC,iBAAiB,QAASV","file":"../src/main.min.js","sourcesContent":["'use strict'","const giphy_api = {\n    endpoint: `https://api.giphy.com/v1/gifs/search?`,\n    key: `lQJ9BIU9QoeorJeS5Z9xEiyfLAmlGh5E`\n}\nconst search_button = document.querySelector(`.form__btn`);\n\nconst visible_response = () => {\n    document.querySelector(`.response`).style.display = `block`;\n}\n\nconst unvisible_response = () => {\n    document.querySelector(`.response`).style.display = `none`;\n}\n\nconst add_response_title = () => {\n    let response_title = document.querySelector(`.response__title`),\n    request_text = document.querySelector(`.form__input`).value;\n\n    response_title.innerHTML = `Ответ по запросу: ${request_text}`;\n}\n\nconst add_image_src = (result, img) => {\n    if(img.alt.split('№')[1] == 1) {\n        img.src = `https://media1.giphy.com/media/${result.data[0].id}/giphy.gif`\n    } else if (img.alt.split('№')[1] == 2) {\n        img.src = `https://media1.giphy.com/media/${result.data[1].id}/giphy.gif`\n    } else if (img.alt.split('№')[1] == 3) {\n        img.src = `https://media1.giphy.com/media/${result.data[2].id}/giphy.gif`\n    }\n}\n\nconst add_error = () => {\n    let text_error = document.createElement(`div`);\n    text_error.className = `form__error`;\n    try {\n        if(request_text == `` && request_text == null && request_text == undefined) BAD_code()\n    } catch {\n        open_popup(`Ничего не найдено`, `Введите запрос`);\n    }\n    if(document.querySelector(`.form__error`) === null) {\n        document.querySelector(`.form__input`).after(text_error);\n        document.querySelector(`.form__error`).innerHTML = `Ничего не найдено, введите корректный запрос`;\n    } \n}\n\nconst delete_error = () => {\n    if(document.querySelector(`.form__error`) != null) {\n        document.querySelector(`.form__error`).remove();\n    }\n}\n\nconst send_request_giphy = () => {\n    get_answer_giphy()\n}\n\nconst show_search_result = (result) => {\n\n    add_response_title();\n    visible_response();\n\n    let images = document.querySelectorAll(`.image-container__image`);\n    \n    for(let img of images) {\n\n        delete_error();\n\n        if(result.data.length != 0) {\n            add_image_src(result, img);\n        } else {\n            add_error();\n            unvisible_response();\n        }\n\n    }\n}\n\nconst open_popup = (tytle, text) => {\n\n    document.querySelector(`.body__title`).innerHTML = tytle;\n    document.querySelector(`.body__text`).innerHTML = text;\n\n    document.querySelector(`.popup__body`).classList.add(`active`);\n    document.querySelector(`.popup`).classList.add(`active`);\n\n    document.querySelector(`.body__button`).addEventListener('click', (event) => {\n        event.preventDefault();\n        close_popup()\n    })\n}\n\nconst close_popup = () => {\n\n    document.querySelector(`.popup__body`).classList.remove(`active`);\n    document.querySelector(`.popup`).classList.remove(`active`);\n\n}\n\nasync function get_answer_giphy() {\n\n    let request_text = document.querySelector(`.form__input`).value;\n   \n    try {\n        let get_result = await fetch(\n            `${giphy_api.endpoint}api_key=${giphy_api.key}&q=${request_text}&limit=3&offset=0&lang=ru`\n        )\n        let result = await get_result.json();\n        show_search_result(result);\n    } catch (error) {\n        open_popup(`Нет доступа к серверу`, `Повторите попытку позже`);\n        console.log(`Нет доступа к серверу. Повторите позже. Подробнее:${error}`)\n    }    \n}\n\n\nsearch_button.addEventListener('click', send_request_giphy)"]}