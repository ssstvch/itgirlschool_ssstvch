"use strict";
const giphy_api={endpoint:"https://api.giphy.com/v1/gifs/search?",key:"lQJ9BIU9QoeorJeS5Z9xEiyfLAmlGh5E"},search_button=document.querySelector(".form__btn"),visible_response=()=>{document.querySelector(".response").style.display="block"},unvisible_response=()=>{document.querySelector(".response").style.display="none"},add_response_title=()=>{let e=document.querySelector(".response__title"),t=document.querySelector(".form__input").value;e.innerHTML=`Ответ по запросу: ${t}`},add_image_src=(e,t)=>{1==t.alt.split("№")[1]?t.src=`https://media1.giphy.com/media/${e.data[0].id}/giphy.gif`:2==t.alt.split("№")[1]?t.src=`https://media1.giphy.com/media/${e.data[1].id}/giphy.gif`:3==t.alt.split("№")[1]&&(t.src=`https://media1.giphy.com/media/${e.data[2].id}/giphy.gif`)},add_error=()=>{let e=document.createElement("div");e.className="form__error";try{""==request_text&&null==request_text&&null==request_text&&BAD_code()}catch{open_popup("Ничего не найдено","Введите запрос")}null===document.querySelector(".form__error")&&(document.querySelector(".form__input").after(e),document.querySelector(".form__error").innerHTML="Ничего не найдено, введите корректный запрос")},delete_error=()=>{null!=document.querySelector(".form__error")&&document.querySelector(".form__error").remove()},send_request_giphy=()=>{get_answer_giphy()},show_search_result=e=>{add_response_title(),document.querySelector(".response").style.display="block";let t=document.querySelectorAll(".image-container__image");for(let r of t)null!=document.querySelector(".form__error")&&document.querySelector(".form__error").remove(),0!=e.data.length?add_image_src(e,r):(add_error(),document.querySelector(".response").style.display="none")},open_popup=(e,t)=>{document.querySelector(".body__title").innerHTML=e,document.querySelector(".body__text").innerHTML=t,document.querySelector(".popup__body").classList.add("active"),document.querySelector(".popup").classList.add("active"),document.querySelector(".body__button").addEventListener("click",(e=>{e.preventDefault(),close_popup()}))},close_popup=()=>{document.querySelector(".popup__body").classList.remove("active"),document.querySelector(".popup").classList.remove("active")};async function get_answer_giphy(){let e=document.querySelector(".form__input").value;try{let t=await fetch(`${giphy_api.endpoint}api_key=${giphy_api.key}&q=${e}&limit=3&offset=0&lang=ru`),r=await t.json();show_search_result(r)}catch(e){open_popup("Нет доступа к серверу","Повторите попытку позже"),console.log(`Нет доступа к серверу. Повторите позже. Подробнее:${e}`)}}search_button.addEventListener("click",send_request_giphy);
//# sourceMappingURL=../sourcemaps/main.min.js.map
r(".form__input").value;
  e.innerHTML = "\u041E\u0442\u0432\u0435\u0442 \u043F\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u0443: ".concat(t);
},
    add_image_src = function add_image_src(e, t) {
  1 == t.alt.split("№")[1] ? t.src = "https://media1.giphy.com/media/".concat(e.data[0].id, "/giphy.gif") : 2 == t.alt.split("№")[1] ? t.src = "https://media1.giphy.com/media/".concat(e.data[1].id, "/giphy.gif") : 3 == t.alt.split("№")[1] && (t.src = "https://media1.giphy.com/media/".concat(e.data[2].id, "/giphy.gif"));
},
    add_error = function add_error() {
  var e = document.createElement("div");
  e.className = "form__error";

  try {
    "" == request_text && null == request_text && null == request_text && BAD_code();
  } catch (_unused) {
    open_popup("Ничего не найдено", "Введите запрос");
  }

  null === document.querySelector(".form__error") && (document.querySelector(".form__input").after(e), document.querySelector(".form__error").innerHTML = "Ничего не найдено, введите корректный запрос");
},
    delete_error = function delete_error() {
  null != document.querySelector(".form__error") && document.querySelector(".form__error").remove();
},
    send_request_giphy = function send_request_giphy() {
  get_answer_giphy();
},
    show_search_result = function show_search_result(e) {
  add_response_title(), document.querySelector(".response").style.display = "block";
  var t = document.querySelectorAll(".image-container__image");

  var _iterator = _createForOfIteratorHelper(t),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var r = _step.value;
      null != document.querySelector(".form__error") && document.querySelector(".form__error").remove(), 0 != e.data.length ? add_image_src(e, r) : (add_error(), document.querySelector(".response").style.display = "none");
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
},
    open_popup = function open_popup(e, t) {
  document.querySelector(".body__title").innerHTML = e, document.querySelector(".body__text").innerHTML = t, document.querySelector(".popup__body").classList.add("active"), document.querySelector(".popup").classList.add("active"), document.querySelector(".body__button").addEventListener("click", function (e) {
    e.preventDefault(), close_popup();
  });
},
    close_popup = function close_popup() {
  document.querySelector(".popup__body").classList.remove("active"), document.querySelector(".popup").classList.remove("active");
};

function get_answer_giphy() {
  return _get_answer_giphy.apply(this, arguments);
}

function _get_answer_giphy() {
  _get_answer_giphy = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
    var e, t, r;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            e = document.querySelector(".form__input").value;
            _context.prev = 1;
            _context.next = 4;
            return fetch("".concat(giphy_api.endpoint, "api_key=").concat(giphy_api.key, "&q=").concat(e, "&limit=3&offset=0&lang=ru"));

          case 4:
            t = _context.sent;
            _context.next = 7;
            return t.json();

          case 7:
            r = _context.sent;
            show_search_result(r);
            _context.next = 14;
            break;

          case 11:
            _context.prev = 11;
            _context.t0 = _context["catch"](1);
            open_popup("Нет доступа к серверу", "Повторите попытку позже"), console.log("\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435. \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435:".concat(_context.t0));

          case 14:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, null, [[1, 11]]);
  }));
  return _get_answer_giphy.apply(this, arguments);
}

search_button.addEventListener("click", send_request_giphy);